<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet href="../xsl/ditaview_shell.xsl" type="text/xsl"?><!DOCTYPE concept PUBLIC "-//IBM//DTD DITA Composite//EN" "../dtd/ditabase.dtd">
<concept id="DITA-ant">
  <title>Building DITA output with Ant</title>
  <shortdesc>You can use the Ant build tool to automate builds that use the DITA processes including output for the sample documents provided with DITA. </shortdesc>
  <prolog/>
  <conbody>
    <p>DITA provides a set of XSLT scripts for producing help output in Eclipse, Java Help, HTML Help, for producing web HTML pages, or for producing PDF. To make it easier to invoke these scripts, the DITA distribution now provides an experimental Ant file that you can use to build the DITA documentation, demos, and samples. </p>
    <p>Ant is a Java-based, Open Source tool provided by the Apache Foundation to declare a sequence of build actions. As such, Ant is well suited for document builds as well as development builds. </p>
    <p>You don&apos;t have to set up a build environment, of course to run the DITA XSLT scripts. To execute the DITA scripts directly, see the <xref href="DITA-readme.xml#readmetop/install">DITA Readme</xref> document.</p>
    <note>The following instructions and the associated <codeph>build.xml</codeph> and <codeph>ditatargets.xml </codeph>files are for the Java 1.4.2, Ant 1.6.2, FOP 0.20.5, and Saxon 6.5.3 releases. These instructions are likely to need some adjustment for other versions of these components and for specific environments.</note>
  </conbody>
  <task id="setup_ant">
    <title>Setting Up Ant</title>
    <shortdesc>To create an Ant build environment for DITA, you can download and install some Java Open Source components.</shortdesc>
    <prolog/>
    <taskbody>
      <context>For components other than the JDK, configuring the environment and using the component are often easier if you install the component in a directory without spaces in the pathname.</context>
      <steps>
        <step importance="required">
          <cmd>Download and install a JDK (Java Development Kit).</cmd>
          <info>Ant requires a full Java development environment (available at <xref href="http://java.sun.com/j2se/index.jsp" format="html">http://java.sun.com/j2se/index.jsp</xref>).</info>
        </step>
        <step importance="required">
          <cmd>Download and install the DITA distribution.</cmd>
          <info>Unzip the DITA distribution in a directory. </info>
        </step>
        <step importance="required">
          <cmd>Download and install Ant.</cmd>
          <info>You can get the Ant binary distribution from <xref href="http://ant.apache.org/bindownload.cgi" format="zip">http://ant.apache.org/bindownload.cgi</xref>. Follow the instructions for installing Ant in the Ant manual at <xref href="http://ant.apache.org/manual/index.html" format="html">http://ant.apache.org/manual/index.html</xref>.</info>
        </step>
        <step importance="optional">
          <cmd>Install Saxon</cmd>
          <info>Saxon is an advanced XSLT processor that integrates well with Ant. You can get Saxon from <xref href="http://saxon.sourceforge.net/" format="html">http://saxon.sourceforge.net/</xref>.</info>
        </step>
        <step importance="optional">
          <cmd>Install FOP</cmd>
          <info>FOP is an XSL-FO processor, which you&apos;ll need if you want to generate PDF output. You can get a binary distribution of FOP from <xref href="http://xml.apache.org/fop/download.html" format="html">http://xml.apache.org/fop/download.html</xref>.</info>
        </step>
        <step importance="required">
          <cmd>Set the environment variables.</cmd>
          <info>As of this writing, if you use all of the optional components and follow all of the recommendations in the component documentation, you would end up with the following environment variables: <dl>
              <dlentry>
                <dt>JAVA_HOME</dt>
                <dd>Set to the base directory for the JDK.</dd>
              </dlentry>
              <dlentry>
                <dt>ANT_HOME</dt>
                <dd>Set to the base directory for Ant.</dd>
              </dlentry>
              <dlentry>
                <dt>PATH</dt>
                <dd>Includes the add the <codeph>bin</codeph> and <codeph>jre\bin</codeph> directories under the JDK and the <codeph>bin</codeph> directory under Ant.</dd>
              </dlentry>
              <dlentry>
                <dt>CLASSPATH</dt>
                <dd>For Saxon, includes the <codeph>saxon.jar</codeph> library from the Saxon directory. For FOP, includes the <codeph>fop.jar</codeph> file from the <codeph>build</codeph> subdirectory and the <codeph>avalon-framework-cvs-20020806.jar</codeph> and <codeph>batik.jar</codeph> files from the <codeph>lib</codeph> subdirectory. In principle, you should not have to add JDK or Ant jar files to the <codeph>CLASSPATH</codeph>, but if you run into problems, you might want to try that.</dd>
              </dlentry>
            </dl></info>
        </step>
      </steps>
    </taskbody>
  </task>
  <concept id="running_ant">
    <title>Running Ant</title>
    <conbody>
      <p>After you set up your Ant environment, you can build the DITA output. Merely change to the DITA 1.3 distribution directory and execute Ant on the DITA build.xml file.</p>
      <codeblock>ant all</codeblock>
      <p>The build creates an <codeph>out</codeph> directory and puts the build output in subdirectories that parallel the source directory.</p>
      <p>To experiment with DITA, you can modify the DITA sample files and then rebuild that portion of the output. First, you remove that portion of the output by specifying a &quot;clean&quot; target. For instance, to rebuild just the FAQ demo, you can execute </p>
      <codeblock>ant clean.demo.faq
ant demo.faq</codeblock>
      <p>To find out the complete list of targets you can clean and build, look at the <codeph>name</codeph> attributes for the <codeph>target</codeph> elements within the <codeph>build.xml</codeph> file. Or, just enter</p>
      <codeblock>ant -projecthelp</codeblock>
      <p>If you want to build your input to output in an default and easy way, you can try to invoke the prompt mode ant by executing</p>
      <codeblock>ant</codeblock>
      <p>Ant will prompt you for the input and output. You need to fill in the input file and output directory in correctly upper or lower case.</p>
      <p>You can reuse the targets provided by the <codeph>conductor.xml</codeph> file in builds for your own DITA content. Just copy the <codeph>build.xml</codeph>, <codeph>conductor.xml</codeph>, <codeph>pretargets.xml,</codeph> <codeph>ditatargets.xml</codeph> and<codeph>catalog-ant.xml</codeph> file into a new directory and edit the <codeph>build.xml</codeph> to specify your DITA files.</p>
      <note type="note">To troubleshoot problems in setting up Java, Ant, Saxon, or FOP, you will get better information from the communities for those components than for the DITA community. Of course, if you find issues with the DITA XSLT scripts (or have ideas for improving them), you should engage the DITA community.</note>
      <section>
        <title>Ant tasks and scripts</title>
        <p>
          <draft-comment>here, describe the available Ant tasks and the extra scripts that Erik provided.</draft-comment>
        </p>
        <p>The build process including pre-process can be invoked by using Ant script. There are four major Ant script files, conductor.xml, pretargets.xml, ditatargets.xml and catalog-ant.xml.</p>
        <p>
          <dl>
            <dlentry>
              <dt>conductor.xml</dt>
              <dd>The main Ant script file which include the other three ant scripts and provides main targets for every output style. </dd>
            </dlentry>
            <dlentry>
              <dt>targets in conductor.xml</dt>
              <dd>
                <p>The following targets in conductor.xml will invoke the complete processing of dita files which can be called by users.</p>
                <dl>
                  <dlentry>
                    <dt>dita2docbook</dt>
                    <dd>Transform dita topic or dita map into docbook output. <table>
                        <title>Parameter Table of dita2docbook</title>
                        <tgroup cols="3">
                          <colspec colname="col1" align="center" colwidth="1*"/>
                          <colspec colname="col2" align="center" colwidth="4*"/>
                          <colspec colname="col3" align="center" colwidth="1*"/>
                          <thead>
                            <row>
                              <entry>Parameter </entry>
                              <entry>Description</entry>
                              <entry>Required</entry>
                            </row>
                          </thead>
                          <tbody>
                            <row>
                              <entry>args.input</entry>
                              <entry>The file path and file name of the input file. This argument should be in the same upper or lower case with the filename on file system.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>output.dir</entry>
                              <entry>The path of the output directory.</entry>
                              <entry>Yes</entry>
                            </row>
                          </tbody>
                        </tgroup>
                      </table></dd>
                  </dlentry>
                  <dlentry>
                    <dt>dita2eclipsehelp</dt>
                    <dd>Transform dita topic or dita map into eclipse help plugin based on xhtml. <table>
                        <title>Parameter Table of dita2eclipsehelp</title>
                        <tgroup cols="3">
                          <colspec colname="col1" align="center" colwidth="1*"/>
                          <colspec colname="col2" align="center" colwidth="4*"/>
                          <colspec colname="col3" align="center" colwidth="1*"/>
                          <thead>
                            <row>
                              <entry>Parameter </entry>
                              <entry>Description</entry>
                              <entry>Required</entry>
                            </row>
                          </thead>
                          <tbody>
                            <row>
                              <entry>args.input</entry>
                              <entry>The file path and file name of the input file. This argument should be in the same upper or lower case with the filename on file system.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>output.dir</entry>
                              <entry>The path of the output directory.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>args.eclipse.toc</entry>
                              <entry>The root file name of the output toc file.(Default is &apos;toc&apos;)</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.eclipse.plugin</entry>
                              <entry>The file path of the plugin.xml file for eclipse help (Default value is <q>resource/plugin.xml</q>)</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>dita.input.valfile</entry>
                              <entry>The file name containing filter/flagging/revision information.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.css</entry>
                              <entry>User&apos;s CSS filename parameter. <p>This can be the name of a stylesheet used by one or more topics within an overall group. This stylesheet can use the CSS cascade effect to modify existing properties or it can override or define new properties.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.csspath</entry>
                              <entry>Default CSS path parameter.<p>This specifies a path for the cascading style sheet (CSS). This allows you to place the CSS in one place and have several different topics point to it. If no CSSPATH is specified, the CSS is assumed to be in the same directory as the XHTML.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdf</entry>
                              <entry>The file name containing XHTML to be placed in the HEAD area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-heading area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.ftr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-footing area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.draft</entry>
                              <entry>Default &quot;hide draft &amp; cleanup content&quot; processing parameter (<q>no</q>= hide them); <q>no</q> and <q>yes</q> are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.artlbl</entry>
                              <entry>Default &quot;output artwork filenames&quot; processing parameter; <q>no</q>and <q>yes</q>are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                          </tbody>
                        </tgroup>
                      </table></dd>
                  </dlentry>
                  <dlentry>
                    <dt>dita2htmlhelp</dt>
                    <dd>Transform dita topic or dita map into html help output based on html. <table>
                        <title>Parameter Table of dita2htmlhelp</title>
                        <tgroup cols="3">
                          <colspec colname="col1" align="center" colwidth="1*"/>
                          <colspec colname="col2" align="center" colwidth="4*"/>
                          <colspec colname="col3" align="center" colwidth="1*"/>
                          <thead>
                            <row>
                              <entry>Parameter </entry>
                              <entry>Description</entry>
                              <entry>Required</entry>
                            </row>
                          </thead>
                          <tbody>
                            <row>
                              <entry>args.input</entry>
                              <entry>The file path and file name of the input file. This argument should be in the same upper or lower case with the filename on file system.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>output.dir</entry>
                              <entry>The path of the output directory.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>dita.input.valfile</entry>
                              <entry>The file name containing filter/flagging/revision information.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.css</entry>
                              <entry>User&apos;s CSS filename parameter. <p>This can be the name of a stylesheet used by one or more topics within an overall group. This stylesheet can use the CSS cascade effect to modify existing properties or it can override or define new properties.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.csspath</entry>
                              <entry>Default CSS path parameter.<p>This specifies a path for the cascading style sheet (CSS). This allows you to place the CSS in one place and have several different topics point to it. If no CSSPATH is specified, the CSS is assumed to be in the same directory as the XHTML.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdf</entry>
                              <entry>The file name containing XHTML to be placed in the HEAD area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-heading area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.ftr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-footing area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.draft</entry>
                              <entry>Default &quot;hide draft &amp; cleanup content&quot; processing parameter (<q>no</q>= hide them); <q>no</q> and <q>yes</q> are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.artlbl</entry>
                              <entry>Default &quot;output artwork filenames&quot; processing parameter; <q>no</q>and <q>yes</q>are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                          </tbody>
                        </tgroup>
                      </table></dd>
                  </dlentry>
                  <dlentry>
                    <dt>dita2javahelp</dt>
                    <dd>Transform dita topic or dita map into java help output based on html. <table>
                        <title>Parameter Table of dita2javahelp</title>
                        <tgroup cols="3">
                          <colspec colname="col1" align="center" colwidth="1*"/>
                          <colspec colname="col2" align="center" colwidth="4*"/>
                          <colspec colname="col3" align="center" colwidth="1*"/>
                          <thead>
                            <row>
                              <entry>Parameter </entry>
                              <entry>Description</entry>
                              <entry>Required</entry>
                            </row>
                          </thead>
                          <tbody>
                            <row>
                              <entry>args.input</entry>
                              <entry>The file path and file name of the input file. This argument should be in the same upper or lower case with the filename on file system.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>output.dir</entry>
                              <entry>The path of the output directory.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>args.javahelp.toc</entry>
                              <entry>The root file name of the output toc file.(Default is &apos;toc&apos;)</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.javahelp.map</entry>
                              <entry>The root file name of the output javahelp map file.(Default is &apos;map&apos;)</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.javahelp.helpset</entry>
                              <entry>The file path of the helpset file for java help. (Default value is <q>resource/helpset.hs</q>)</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>dita.input.valfile</entry>
                              <entry>The file name containing filter/flagging/revision information.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.css</entry>
                              <entry>User&apos;s CSS filename parameter. <p>This can be the name of a stylesheet used by one or more topics within an overall group. This stylesheet can use the CSS cascade effect to modify existing properties or it can override or define new properties.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.csspath</entry>
                              <entry>Default CSS path parameter.<p>This specifies a path for the cascading style sheet (CSS). This allows you to place the CSS in one place and have several different topics point to it. If no CSSPATH is specified, the CSS is assumed to be in the same directory as the XHTML.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdf</entry>
                              <entry>The file name containing XHTML to be placed in the HEAD area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-heading area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.ftr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-footing area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.draft</entry>
                              <entry>Default &quot;hide draft &amp; cleanup content&quot; processing parameter (<q>no</q>= hide them); <q>no</q> and <q>yes</q> are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.artlbl</entry>
                              <entry>Default &quot;output artwork filenames&quot; processing parameter; <q>no</q>and <q>yes</q>are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                          </tbody>
                        </tgroup>
                      </table></dd>
                  </dlentry>
                  <dlentry>
                    <dt>dita2xhtml</dt>
                    <dd>Transform dita topic or dita map into xhtml web output.<table>
                        <title>Parameter Table of dita2xhtml</title>
                        <tgroup cols="3">
                          <colspec colname="col1" align="center" colwidth="1*"/>
                          <colspec colname="col2" align="center" colwidth="4*"/>
                          <colspec colname="col3" align="center" colwidth="1*"/>
                          <thead>
                            <row>
                              <entry>Parameter </entry>
                              <entry>Description</entry>
                              <entry>Required</entry>
                            </row>
                          </thead>
                          <tbody>
                            <row>
                              <entry>args.input</entry>
                              <entry>The file path and file name of the input file. This argument should be in the same upper or lower case with the filename on file system.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>output.dir</entry>
                              <entry>The path of the output directory.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>args.xhtml.toc</entry>
                              <entry>The root file name of the output toc file.(Default is &apos;index&apos;)</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>dita.input.valfile</entry>
                              <entry>The file name containing filter/flagging/revision information.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.css</entry>
                              <entry>User&apos;s CSS filename parameter. <p>This can be the name of a stylesheet used by one or more topics within an overall group. This stylesheet can use the CSS cascade effect to modify existing properties or it can override or define new properties.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.csspath</entry>
                              <entry>Default CSS path parameter.<p>This specifies a path for the cascading style sheet (CSS). This allows you to place the CSS in one place and have several different topics point to it. If no CSSPATH is specified, the CSS is assumed to be in the same directory as the XHTML.</p></entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdf</entry>
                              <entry>The file name containing XHTML to be placed in the HEAD area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.hdr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-heading area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.ftr</entry>
                              <entry>The file name containing XHTML to be placed in the BODY running-footing area</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.draft</entry>
                              <entry>Default &quot;hide draft &amp; cleanup content&quot; processing parameter (<q>no</q>= hide them); <q>no</q> and <q>yes</q> are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                            <row>
                              <entry>args.artlbl</entry>
                              <entry>Default &quot;output artwork filenames&quot; processing parameter; <q>no</q>and <q>yes</q>are valid values; non-<q>yes</q> is ignored.</entry>
                              <entry>No</entry>
                            </row>
                          </tbody>
                        </tgroup>
                      </table></dd>
                  </dlentry>
                  <dlentry>
                    <dt>dita2pdf</dt>
                    <dd>Transform dita topic or dita map into pdf. <table>
                        <title>Parameter Table of dita2pdf</title>
                        <tgroup cols="3">
                          <colspec colname="col1" align="center" colwidth="1*"/>
                          <colspec colname="col2" align="center" colwidth="4*"/>
                          <colspec colname="col3" align="center" colwidth="1*"/>
                          <thead>
                            <row>
                              <entry>Parameter </entry>
                              <entry>Description</entry>
                              <entry>Required</entry>
                            </row>
                          </thead>
                          <tbody>
                            <row>
                              <entry>args.input</entry>
                              <entry>The file path and file name of the input file. This argument should be in the same upper or lower case with the filename on file system.</entry>
                              <entry>Yes</entry>
                            </row>
                            <row>
                              <entry>output.dir</entry>
                              <entry>The path of the output directory.</entry>
                              <entry>Yes</entry>
                            </row>
                          </tbody>
                        </tgroup>
                      </table></dd>
                  </dlentry>
                </dl>
              </dd>
            </dlentry>
            <dlentry>
              <dt>pretargets.xml</dt>
              <dd>The Ant script file which contains all targets for pre-process.</dd>
            </dlentry>
            <dlentry>
              <dt>ditatargets.xml</dt>
              <dd>The Ant script file which contains all targets for main transformation.</dd>
            </dlentry>
            <dlentry>
              <dt>catalog-ant.xml</dt>
              <dd>The xml catalog information which is used by Ant.</dd>
            </dlentry>
          </dl>
        </p>
      </section>
      <section><title>Sample ant script</title><p>These ant scripts are in /ant directory. They are simple and easy to learn. From these files, you can see how to write your own ant script to build your own process.</p><p>Here is a sample template for writing an ant script that excute transformation to xhtml in /ant directory</p><p>
          <codeblock>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;

&lt;project name=&quot;sample_xhtml&quot; default=&quot;all&quot; basedir=&quot;..&quot;&gt;
  
  &lt;import file=&quot;${basedir}${file.separator}conductor.xml&quot;/&gt;

 &lt;target name=&quot;all&quot; depends=&quot;sample2xhtml&quot;&gt;
 &lt;/target&gt;
 &lt;!-- revise below here --&gt;

 &lt;target name=&quot;sample2xhtml&quot; depends=&quot;use-init&quot;&gt;
   &lt;antcall target=&quot;dita2xhtml&quot;&gt;
     &lt;param name=&quot;args.input&quot;
            value=&quot;@DITA.INPUT@&quot;/&gt;
     &lt;param name=&quot;output.dir&quot;
            value=&quot;@OUTPUT.DIR@&quot;/&gt;
   &lt;/antcall&gt;
 &lt;/target&gt;
&lt;/project&gt;
</codeblock>
        </p>After you write the input file and output directory to overwrite @DITA.INPUT@ and @OUTPUT.DIR@, the script can do the transformation from your input to xhtml for you by command<pre>c:\pkg\DITA-OT1.0&gt;ant -f ant/template_xhtml.xml</pre> All of targets we use here are defined in conductor.xml. Therefore, you need to import that file before calling the target.</section>
    </conbody>
  </concept>
</concept>

